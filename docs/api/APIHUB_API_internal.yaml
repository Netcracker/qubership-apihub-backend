openapi: 3.0.3
info:
  title: APIHUB Registry â€“ Internal API
  description: |
    Internal-only API contract for APIHUB services.
  contact:
    name: Netcracker Opensource Group
    email: opensourcegroup@netcracker.com
  license:
    name: qubership
    url: https://github.com/Netcracker/qubership-apihub
  version: "2025.4"
  x-nc-api-audience: BWC
externalDocs:
  description: Find out more about package
  url: https://github.com/Netcracker/qubership-apihub
servers:
  - url: https://{apihub}.qubership.org
    description: APIHUB server
    variables:
      apihub:
        description: Name of the APIHUB server.
        enum:
          - apihub
          - dev.apihub
          - staging.apihub
        default: apihub
security:
  - BearerAuth: []
  - CookieAuth: []
  - api-key: []
  - PersonalAccessToken: []
tags:
  - name: Auth
    description: APIs for auth integrations.
  - name: Packages
    description: APIs for the package management.
  - name: Publish
    description: Publish version API
  - name: Versions
    description: Published package versions API.
  - name: Export
    description: Export API documentation.
  - name: Users
    description: APIs for the user operations.
  - name: Search
    description: Search functions.
  - name: Admin
    description: APIs for technical administration.
  - name: Integrations
    description: APIs for git integrations.
  - name: Roles
    description: APIs for role management.
  - name: Operations
    description: Operations APIs.
  - name: Documents
    description: Documents APIs.
  - name: Changes
    description: Changes APIs.
  - name: TryIt
    description: API for 'try it' functionality
  - name: Operation groups
    description: Operation groups
  - name: User profile
    description: APIs for user's personal settings.
paths:
  "/api/v1/login/sso/{idpId}":
    get:
      x-nc-api-audience: noBWC
      tags:
        - Auth
      summary: Authentication via an external identity provider
      description: |
        Starts the authentication process in APIHUB via an external identity provider.

        In case of successful authentication, the request will be redirected to the **redirectUri** and
        the response will contain an access token cookie and a refresh token cookie for future API calls.
        All subsequent APIHUB calls must use the access token cookie in **CookieAuth**.

        If the request contained a valid refresh token, the authentication process will not be started and a new access token will be issued.
      operationId: ssoLogin
      security:
        - {}
        - RefreshTokenAuth: []
      parameters:
        - name: redirectUri
          in: query
          description: URI, where user must be redirected in case of successful APIHUB authentication.
          required: true
          schema:
            type: string
            format: uri
            example: "https://apihub.qubership.org/portal"
        - name: idpId
          in: path
          description: IDP id to be used for the authentication process.
          required: true
          schema:
            type: string
            example: external-idp
        - name: apihub-refresh-token
          in: cookie
          description: Refresh token that will be used to issue a new access token.
          schema:
            type: string
            example: "apihub-refresh-token=eyJhbGciOiJSUzI1NiIsImtpZCI6InNlY3JldC1pZCIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhcGlodWIiLCJuYW1lIjoiQVBJIEh1YiIsImV4cCI6MTcwMDAwMDAwMCwiaWF0IjoxNjAwMDAwMDAwfQ..."
      responses:
        "200":
          description: Successful access token refresh
          headers:
            Set-Cookie:
              description: apihub-access-token cookie, containing a refreshed access token.
              schema:
                type: string
                example: "apihub-access-token=eyJhbGciOiJSUzI1NiIsImtpZCI6InNlY3JldC1pZCIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhcGlodWIiLCJuYW1lIjoiQVBJIEh1YiIsImV4cCI6MTcwMDAwMDAwMCwiaWF0IjoxNjAwMDAwMDAwfQ..."
        "302":
          description: Found
          headers:
            Set-Cookie:
              description: |
                Multiple Set-Cookie headers are returned:
                - apihub-access-token containing the access token with a short expiration time
                - apihub-refresh-token containing the refresh token with a longer expiration time
              schema:
                type: string
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                IncorrectInputParams:
                  $ref: "#/components/examples/IncorrectInputParameters"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v3/auth/local":
    post:
      x-nc-api-audience: noBWC
      tags:
        - Auth
      summary: Authentication via the local identity provider
      description: |
        Performs authentication in APIHUB via the local identity provider.

        **Note: This endpoint is not available in production mode.**

        In case of successful authentication, the response will contain an access token cookie and a refresh token cookie for future API calls.
        All subsequent APIHUB calls must use the access token cookie in **CookieAuth**.
      operationId: localLogin
      security:
        - BasicAuth: []
      responses:
        "200":
          description: Success
          headers:
            Set-Cookie:
              description: |
                Multiple Set-Cookie headers are returned:
                - apihub-access-token containing the access token with a short expiration time
                - apihub-refresh-token containing the refresh token with a longer expiration time
              schema:
                type: string
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples: {}
  "/api/v3/auth/local/refresh":
    get:
      x-nc-api-audience: noBWC
      tags:
        - Auth
      summary: Refreshing the local user token
      description: |
        Performs access token refresh, in case of failure performs redirection to the **redirectUri**.

        **Note: This endpoint is not available in production mode.**
      operationId: refreshToken
      security:
        - RefreshTokenAuth: []
      parameters:
        - name: redirectUri
          in: query
          description: URI, where user must be redirected in case of unsuccessful token refresh.
          required: true
          schema:
            type: string
            format: uri
            example: "https://apihub.qubership.org/login"
        - name: apihub-refresh-token
          in: cookie
          description: Refresh token that will be used to issue a new access token.
          schema:
            type: string
            example: "apihub-refresh-token=eyJhbGciOiJSUzI1NiIsImtpZCI6InNlY3JldC1pZCIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhcGlodWIiLCJuYW1lIjoiQVBJIEh1YiIsImV4cCI6MTcwMDAwMDAwMCwiaWF0IjoxNjAwMDAwMDAwfQ..."
      responses:
        "200":
          description: Successful access token refresh
          headers:
            Set-Cookie:
              description: apihub-access-token cookie, containing a refreshed access token.
              schema:
                type: string
                example: "apihub-access-token=eyJhbGciOiJSUzI1NiIsImtpZCI6InNlY3JldC1pZCIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhcGlodWIiLCJuYW1lIjoiQVBJIEh1YiIsImV4cCI6MTcwMDAwMDAwMCwiaWF0IjoxNjAwMDAwMDAwfQ..."
        "302":
          description: Found
  "/api/v2/packages/{packageId}/status":
    parameters:
      - $ref: "#/components/parameters/packageId"
    get:
      x-nc-api-audience: noBWC
      tags:
        - Packages
        - Admin
      summary: Get package status
      description: Get package status.
      operationId: getPackagesIdStatus
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PackageStatus"
              examples: {}
        "301":
          description: Moved Permanently
          headers:
            Location:
              schema:
                type: string
              description: Current ednpoint with new packageId of moved package
            X-New-Package-Id:
              schema:
                type: string
              description: New packageId of moved package
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples: {}
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples: {}
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v3/packages/{packageId}/publish/{publishId}/status":
    parameters:
      - $ref: "#/components/parameters/packageId"
      - name: publishId
        description: Publish Id
        in: path
        required: true
        schema:
          type: string
          format: uuid
          example: 9c8e9045-dd9c-4946-b9e4-e05e3f41c4cc
    post:
      x-nc-api-audience: noBWC
      tags:
        - Publish
        - Admin
      summary: Store publish status
      description: Store publish status and result.
      operationId: postPackagesIdPublishIdStatusV3
      requestBody:
        description: |
          Store build result, depending on the process status.
          * **running** - build in progress, data object is not transmitted.
          * **error** - build process will send a the list of errors.
          * **complete** - build process will send a result in a ZIP archive.

          ZIP archive with build result can contain folders with sources, builded documents and JSON operation files. In addition, several config files are provided. The structure of these files is described in buildResult schema.
          There are following build types:
            - build - build process for version publication. It consist of contract and operations build and validation, calculation of the changelog, creation of the final version of the published contracts.
            - changelog - only the changelog calculation, no API contracts version will be created. Both version and previousVersion fields *must* contain @<revision> suffix when using changelog buildType.
            - reducedSourceSpecifications - proccess that finds source specifications for all operations from operation group and removes from these specifications operations other than those that are included into operation group.
            - mergedSpecification - process the merges all operations from an operation group into one specification.
            - exportVersion - process of exporting all documents from the package version.
            - exportRestDocument - process of exporting one OpenAPI document form the version.
            - exportRestOperationsGroup - process of exporting one operations group with apiType = rest.
          There are no any config files in buid result archive for exportVersion/exportRestDocument/exportRestOperationsGroup build types, i.e. only the resulting build files will be in the archive.
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - status
                - builderId
              properties:
                data:
                  oneOf:
                    - $ref: "#/components/schemas/BuildResult"
                    - $ref: "#/components/schemas/BuildErrors"
                status:
                  description: Build process result status.
                  type: string
                  enum:
                    - running
                    - error
                    - complete
                builderId:
                  description: Builder identifier.
                  type: string
      responses:
        "204":
          description: No content
          content: {}
        "301":
          description: Moved Permanently
          headers:
            Location:
              schema:
                type: string
              description: Current ednpoint with new packageId of moved package
            X-New-Package-Id:
              schema:
                type: string
              description: New packageId of moved package
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                IncorrectInputParams:
                  $ref: "#/components/examples/IncorrectInputParameters"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v2/packages/{packageId}/versions/recursiveDelete":
    parameters:
      - $ref: "#/components/parameters/packageId"
    post:
      tags:
        - Versions
      summary: Delete expired versions recursively
      description: Recursively delete all expired versions in 'Draft' status under group or workspace
      operationId: deleteExpiredVersionsRecursively
      requestBody:
        description: Recursive delete parameters
        content:
          application/json:
            schema:
              type: object
              properties:
                olderThanDate:
                  description: Versions published earlier than the date are going to be deleted.
                  type: string
                  format: 'date'
                  example: '2023-05-12'
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  jobId:
                    description: Id of job deleting versions.
                    type: string
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                PackageNotFound:
                  $ref: "#/components/examples/PackageNotFound"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v2/builders/{builderId}/tasks":
    parameters:
      - $ref: "#/components/parameters/builderId"
    post:
      tags:
        - Publish
        - Admin
      summary: Assign build task to Builder
      description: |
        Returns empty response 204 (in case of no free build task to assign) or multipart form (src+config, matching current start build payload)
      operationId: postBuilderIdTasks
      responses:
        "200":
          description: Build task assigned
          content:
            application/zip:
              schema:
                type: object
                properties:
                  sources/:
                    type: string
                    description: |
                      Folder with source files for publish.
                      **Required**, if the buidType = buid and "files" array is filled in config.
                    format: binary
                  config.json:
                    oneOf:
                      - $ref: "#/components/schemas/PublishBuildConfig"
                      - $ref: "#/components/schemas/ExportVersionBuildConfig"
                      - $ref: "#/components/schemas/ExportRestDocumentBuildConfig"
                      - $ref: "#/components/schemas/ExportRestOperationsGroupBuildConfig"
                    discriminator:
                      propertyName: buildType
        "204":
          description: No content
          content: {}
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples: {}
        "410":
          description: Gone
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples: {}
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v1/debug/logs":
    put:
      tags:
        - Admin
      summary: Store logs
      description: Store debug logs from client
      operationId: storeLogs
      security:
        - BearerAuth: []
        - CookieAuth: []
        - api-key: []
        - PersonalAccessToken: []
      requestBody:
        description: Log data to store
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
      responses:
        "200":
          description: Success
          content: {}
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v2/auth/publicKey":
    get:
      tags:
        - Auth
      summary: Get RSA public key
      description: |
        Returns the RSA public key used for JWT token verification.
        Required for agent to verify apihub tokens.
      operationId: getRsaPublicKey
      security: [{}]
      responses:
        "200":
          description: Success
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
                description: RSA public key in binary format
        "404":
          description: Public key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v2/auth/apiKey":
    get:
      tags:
        - Auth
      summary: Get API key by key
      description: |
        Returns API key information by the API key value.
        Required to verify api key for external authorization.
        The API key should be provided in the `api-key` header.
      operationId: getApiKeyByKey
      security: [{}]
      parameters:
        - name: api-key
          in: header
          description: API key value
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: API key identifier
                  packageId:
                    type: string
                    description: Package identifier
                  name:
                    type: string
                    description: API key name
                  revoked:
                    type: boolean
                    description: Whether the API key is revoked
                  roles:
                    type: array
                    items:
                      type: string
                    description: List of roles associated with the API key
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v2/auth/pat":
    get:
      tags:
        - Auth
      summary: Get PAT by PAT
      description: |
        Returns personal access token information by the PAT value.
        Required to verify PAT for external authorization.
        The PAT should be provided in the `X-Personal-Access-Token` header.
      operationId: getPatByPat
      security: [{}]
      parameters:
        - name: X-Personal-Access-Token
          in: header
          description: Personal access token value
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  personalAccessToken:
                    type: object
                    properties:
                      id:
                        type: string
                        description: PAT identifier
                      name:
                        type: string
                        description: PAT name
                      expiresAt:
                        type: string
                        format: date-time
                        nullable: true
                        description: Expiration date
                      createdAt:
                        type: string
                        format: date-time
                        description: Creation date
                      status:
                        type: string
                        enum:
                          - active
                          - expired
                        description: PAT status
                  user:
                    $ref: "#/components/schemas/User"
                  systemRoles:
                    type: array
                    items:
                      type: string
                    description: List of system roles
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v1/auth/apiKey/{apiKeyId}":
    parameters:
      - name: apiKeyId
        in: path
        description: API key identifier
        required: true
        schema:
          type: string
    get:
      tags:
        - Auth
      summary: Get API key by ID
      description: Returns API key information by its identifier
      operationId: getApiKeyById
      security:
        - BearerAuth: []
        - CookieAuth: []
        - api-key: []
        - PersonalAccessToken: []
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: API key identifier
                  packageId:
                    type: string
                    description: Package identifier
                  name:
                    type: string
                    description: API key name
                  revoked:
                    type: boolean
                    description: Whether the API key is revoked
                  roles:
                    type: array
                    items:
                      type: string
                    description: List of roles associated with the API key
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: API key not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/v1/auth/token":
    get:
      tags:
        - Auth
      summary: Check JWT
      description: |
        Checks if the provided JWT token is valid.
        Required for extensions to check Apihub auth.
        Just returns 200 OK if authentication is passed.
      operationId: checkJwt
      security:
        - BearerAuth: []
        - CookieAuth: []
      responses:
        "200":
          description: Success - Token is valid
          content: {}
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
  "/api/internal/users":
    post:
      x-nc-api-audience: noBWC
      tags:
        - Users
        - Admin
      summary: Create internal user
      description: |
        Creation of the internal user, not connected to LDAP or GitLab.
        * If the userId already exists, return an error.
        * One email may be connected to several users at one time, no unique constraint.
        * The password will be stored in an encrypted form locally.
      operationId: postUsers
      security: [{}]
      requestBody:
        description: User for creation
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  description: Email address of the user
                  type: string
                  format: email
                  example: "name.surname@qubership.org"
                name:
                  description: Name of the user
                  type: string
                  example: "Name Surname"
                password:
                  type: string
                  description: User password.
                  format: password
                privateWorkspaceId:
                  type: string
                  description: PackageId for personal private workspace
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples: {}
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                IncorrectInputParams:
                  $ref: "#/components/examples/IncorrectInputParameters"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples: {}
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples: {}
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                InternalServerError:
                  $ref: "#/components/examples/InternalServerError"
components:
  parameters:
    packageId:
      name: packageId
      in: path
      description: Package unique identifier (full alias)
      required: true
      schema:
        type: string
        example: QS.CloudQSS.CPQ.Q-TMF
    builderId:
      name: builderId
      in: path
      description: Builder unique identifier (UUID)
      required: true
      schema:
        type: string
        format: UUID
        example: QS.CloudQSS.CPQ.Q-TMF
  schemas:
    DeprecatedItems:
      description: List of deprecated items in the operation.
      type: array
      items:
        type: object
        properties:
          deprecatedInPreviousVersions:
            description: List of previous release versions where item was also deprecated
            type: array
            items:
              type: string
            example: ["2022.2", "2022,1", "2021.4"]
          declarationJsonPaths:
            description: Declarative path to deprecated item.
            type: array
            items:
              type: array
              items:
                anyOf:
                  - type: string
                  - type: integer
            example: [["paths", "/post/saml/", "test", 1], ["paths", "/post/saml/", "test", 22]]
          description:
            description: Human-readable description of deprecated item.
            type: string
            example: "[Deprecated] query parameter 'petId'"
          deprecatedInfo:
            description: |
              Additional information about single deprecated item:
              * for REST API it is value of 'x-deprecated-meta' extension (value of extension must be string), which is defined for deprecated item.
              * for GraphQL API it is value of 'reason' argument of @deprecated directive.
              * for AsyncAPI 3.0: "[Deprecated] message {name}" (name = message.title or messageId),
                or "[Deprecated] channel {name}" (name = channel.title or channelId).
            type: string
          tolerantHash:
            description: Tolerant hash for Schema object or Parameter object that has been deprecated. It is needed to identify that the same schema/parameter was deprecated in previous version.
            type: string
          hash:
            description: Hash (full) for Schema object or Parameter object that has been deprecated, it is needed to detect semi-breaking changes in UI.
            type: string
    ApiType:
      title: apiType
      type: string
      enum:
        - rest
        - graphql
        - protobuf
        - asyncapi
    PackageStatus:
      description: Published package version content
      type: object
      properties:
        status:
          type: string
          enum:
            - exist
            - deleted
    VersionStatusEnum:
      description: Package version status
      type: string
      enum:
        - draft
        - release
        - archived
    User:
      description: APIHUB user
      type: object
      required:
        - id
      properties:
        id:
          description: Login of the user
          type: string
          example: user1221
        name:
          description: Name of the user
          type: string
          example: "Name Surname"
        email:
          description: Email address of the user
          type: string
          format: email
          example: "name.surname@qubership.org"
        avatarUrl:
          description: Avatar of the user
          type: string
          format: URL
    ErrorResponse:
      description: An error description
      type: object
      properties:
        status:
          description: HTTP Status Code
          type: number
        code:
          description: Internal string error code. Mandatory in response.
          type: string
        message:
          description: The attribute contains an error message.
          type: string
        params:
          type: object
          description: Message parameters
          example:
            id: 12345
            type: string
        debug:
          description: The attribute contains debug details (e.g. stack-trace). Presented in the error response only on Dev/Test environments if corresponding logging level is enabled.
          type: string
      required:
        - status
        - code
        - message
    SpecificationType:
      title: type
      description: Type of the specification notation.
      type: string
      enum:
        - openapi-3-1
        - openapi-3-0
        - openapi-2-0
        - json-schema
        - markdown
        - graphql-schema
        - graphapi
        - introspection
        - protobuf-3
        - asyncapi-3-0
        - unknown
    DocumentFormat:
      title: format
      description: Format of the specification document.
      type: string
      enum:
        - json
        - yaml
        - md
        - graphql
        - gql
        - proto
        - unknown
    Operation:
      description: Operation object
      title: Operation
      type: object
      required:
        - operationId
        - documentId
        - title
        - apiType
        - apiAudience
        - apiKind
      properties:
        operationId:
          description: Operation unique identifier (slug). Not the same as operationId tag from the OpenAPI file.
          type: string
          example: get-quoteManagement-v5-quote
        documentId:
          description: Unique string identifier of the document from which the operation is originated
          type: string
          pattern: "^[a-z0-9-]"
          example: "qitmf-v5-11-json"
        title:
          description: Operation summary/title.
          type: string
        apiType:
          #  description: Type of the API.
          #  type: string
          #  enum:
          #    - rest
          #    - kafka
          #    - grpc
          #    - graphql
          #    - protobuf
          $ref: "#/components/schemas/ApiType"
        externalMetadata:
          description: External operation metadata.
          type: object
        deprecated:
          description: Operation deprecate flag.
          type: boolean
          default: false
        apiAudience:
          description: |
            Operation's target audience.
            * internal - APIs are available for integration within product application.
            * external - APIs exposed outside the boundary of product application: solution delivery integrations, 3rd party integrations, customer integrations.
            * unknown - If any value other than internal or external is used, the API is considered as unknown.
          type: string
          enum:
            - internal
            - external
            - unknown
        apiKind:
          description: |
            Operation API kind.
            * bwc - API with backward compatibility support (a.k.a. public).
            * no-bwc - API without backward compatibility support (a.k.a. internal).
            * experimental - APIs for feature testing. Usage is not recommended.
          type: string
          enum:
            - bwc
            - no-bwc
            - experimental
          default: bwc
        tags:
          description: |
            List of operation tags.
            * in rest, tag is OpenAPI tag.
            * in graphql, tag is root schema type - query, mutation, subscription.
            * in protobuf, tag is service of method.
          type: array
          items:
            type: string
          example: ["RestControllerV5"]
    RestOperationMeta:
      description: Specific parameters for REST operation.
      title: RestOperationMeta
      required:
        - path
        - method
      type: object
      properties:
        path:
          description: Operation endpoint path.
          type: string
          example: "/quoteManagement/v5/quote"
        method:
          description: Operation method.
          type: string
          enum:
            - post
            - get
            - put
            - patch
            - delete
            - head
            - options
            - connect
            - trace
        title:
          description: Operation summary/title.
          type: string
        customTags:
          description: Custom tags.
          type: object
    GraphQLOperationMeta:
      description: Specific parameters for GraphQL operation.
      title: GraphQLOperationMeta
      required:
        - type
        - method
      type: object
      properties:
        type:
          description: Operation type
          type: string
          enum:
            - query
            - mutation
            - subscription
        method:
          description: GraphQL operation method.
          type: string
          example: getPaymentMethodSpecificationCore
        title:
          description: Operation summary/title.
          type: string
        customTags:
          description: Custom tags.
          type: object
    ProtobufOperationMeta:
      description: Specific parameters for Protobuf operation.
      title: ProtobufOperationMeta
      required:
        - type
        - method
      type: object
      properties:
        type:
          description: Operation type
          type: string
          enum: # open questions what types shall be supported?
            - unary
            - serverStreaming
            - clientStreaming
            - bidirectionalStreaming
        method:
          description: Protobuf method name.
          type: string
          example: ListActionLogItems
        title:
          description: Operation title (same as method name but with adding spaces between capital letters)
          type: string
          example: List Action Log Items
    AsyncAPIOperationMeta:
      description: |
        Specific parameters for AsyncAPI 3.0 operation.
        An APIHUB Operation for AsyncAPI is the triple (channel, operation, message).
      title: AsyncAPIOperationMeta
      required:
        - action
        - channel
        - protocol
      type: object
      properties:
        action:
          description: "AsyncAPI operation action: send or receive."
          type: string
          enum:
            - send
            - receive
        channel:
          description: |
            AsyncAPI channel identifier.
            Uses channel.title if available; otherwise uses channelId (key in the document's root channels map).
          type: string
          example: "User Signup Channel"
        protocol:
          description: |
            Communication protocol derived from the channel's first server.
            Expected values: kafka, amqp. Any other protocol value from the spec is displayed as-is.
            If the channel has no server references or the protocol cannot be resolved, the value is "Unknown".
          type: string
          example: "kafka"
        title:
          description: |
            APIHUB Operation title derived from message.title.
            If the message has no title, the messageId (key in the channel's messages map) is used.
          type: string
        customTags:
          description: Custom tags.
          type: object
    BuildResult:
      description: |
        Result of build operation in ZIP archive.
          - The archive can contain folders with sources, builded documents and JSON operation files.
          - In addition, several config files are provided. The structure of these files is described in buildResult schema.
        There are following build types:
          - build - build process for version publication. It consist of contract and operations build and validation, calculation of the changelog, creation of the final version of the published contracts.
          - changelog - only the changelog calculation, no API contracts version will be created. Both version and previousVersion fields *must* contain @<revision> suffix when using changelog buildType.
          - reducedSourceSpecifications - proccess that finds source specifications for all operations from operation group and removes from these specifications operations other than those that are included into operation group.
          - mergedSpecification - process the merges all operations from an operation group into one specification.
          - exportVersion - process of exporting all documents from the package version.
          - exportRestDocument - process of exporting one OpenAPI document form the version.
          - exportRestOperationsGroup - process of exporting one operations group with apiType = rest.
        There are no any config files in buid result archive for exportVersion/exportRestDocument/exportRestOperationsGroup build types, i.e. only the resulting build files will be in the archive.
      title: Build result
      oneOf:
        - title: Build result for build
          description: Build result for buildType = build
          type: object
          required:
            - info.json
            - documents.json
          properties:
            info.json:
              description: |
                Build configuration, published version details.
              type: object
              required:
                - packageId
                - version
                - buildType
              properties:
                packageId:
                  description: Package unique string identifier (full alias).
                  type: string
                  example: "QS.CloudQSS.CPQ.Q-TMF"
                version:
                  description: Version name for publication.
                  type: string
                  example: "2022.3"
                previousVersion:
                  description: |
                    Name of the previous published version.
                    The mask <version>@<revision> may be used to return the revision number.
                  type: string
                  example: "2022.2@4"
                  default: ""
                previousVersionPackageId:
                  description: Previous release version package id.
                  type: string
                  example: "QS.CloudQSS.CPQ.Q-TMF"
                buildType:
                  description: |
                    Type of the build process.
                    - **build** - Standard build process.Consist of contract and operations build and validation, calculation of the changelog, creation of the final version of the published contracts.
                  type: string
                  enum:
                    - build
                buildId:
                  description: Id of the build.
                  type: string
                validationRulesSeverity:
                  type: object
                  description: Configuration for validation rules severity levels
                  readOnly: true
                  properties:
                    brokenRefs:
                      type: string
                      enum:
                        - "error"
                        - "warning"
                      default: "warning"
                      description: Severity level for broken references validation
                builderVersion:
                  type: string
                  description: Version of the builder with which build was made.
                createdBy:
                  type: string
                  description: The user who started the build process.
                metadata:
                  description: Common publish metadata.
                  type: object
                  properties:
                    commitId:
                      description: Last Git commit ID of the version.
                      type: string
                      example: a5d45af7
                    repositoryUrl:
                      description: Url of the Git repository.
                      type: string
                      format: URI
                      example: 'https://<git_group_link>/apihub-registry'
                    labels:
                      description: List of version labels.
                      type: array
                      items:
                        type: string
                      example: ["TMF"]
                    cloudName:
                      description: Name of the cloud for publication from Agent.
                      type: string
                      example: 'k8s-apps2'
                    cloudUrl:
                      description: Full address of the cloud from Agent.
                      type: string
                      format: URI
                      example: "https://k8s-apps2.k8s.sdntest.qubership.org"
                    namespace:
                      description: Namespace of Agent's publication.
                      type: string
                      example: "cloudQSS-release2"
                refs:
                  description:  |
                    Detailed data about referenced versions for current package version.
                  type: array
                  items:
                    type: object
                    required:
                      - refId
                      - version
                      - type
                    properties:
                      refId:
                        description: Referenced package Id.
                        type: string
                        example: "QS.CloudQSS.CPQ.CORE"
                      version:
                        description: Referenced package version number.
                        type: string
                        example: "2022.3@5"
                      parentRefId:
                        description: Referenced parent package Id.
                        type: string
                        example: "QS.CloudQSS.CPQ.CORE"
                      parentVersion:
                        description:  |
                          Referenced parent version.
                          The mask <version>@<revision> may be used to link with a specific revision.
                          If the @revision is not provided, the latest version's revision will be used.
                        type: string
                        example: "2022.2@4"
                      excluded:
                        description: All excluded refs will be ignored (but will still be visible for package version).
                        type: boolean
            documents.json:
              type: object
              description: List of documents data.
              properties:
                documents:
                  type: array
                  items:
                    description: List of builded files.
                    type: object
                    required:
                      - fileId
                      - slug
                      - title
                      - format
                      - type
                      - operations
                    properties:
                      fileId:
                        type: string
                        description: File name with folders.
                        example: "docs/qitmf-v5.11.json"
                      fileName:
                        type: string
                        description: File name (slug+extension).
                        example: "qitmf-v5.11.json"
                      slug:
                        description: Published file slug.
                        type: string
                        pattern: "^[a-z0-9-]"
                        example: "qitmf-v5-11-json"
                      type:
                        $ref: "#/components/schemas/SpecificationType"
                      format:
                        $ref: "#/components/schemas/DocumentFormat"
                      title:
                        description: Document title and summary.
                        type: string
                      description:
                        description: Document description.
                        type: string
                      version:
                        description: Document version. For openapi document, version is taken from info object.
                        type: string
                        example: "1.0.1"
                      operationIds:
                        description: List of operation IDs.
                        type: array
                        items:
                          type: string
                        example: ["get-quoteManagement-v5-quote"]
                      metadata:
                        description: Meta parameters from config file.
                        type: object
                        properties:
                          info:
                            description: Info object from openapi document
                            type: object
                          externalDocs:
                            description: External documentation object from openapi document
                            type: object
                          labels:
                            description: List of file labels.
                            type: array
                            items:
                              type: string
                            example: ["TMF"]
                          blobId:
                            description: Git blob ID of the file.
                            type: string
                            example: a5d84af7
                          tags:
                            type: object
                            properties:
                              name:
                                type: string
                              description:
                                type: string
                              externalDocs:
                                type: object
                                properties:
                                  description:
                                    type: string
                                  url:
                                    type: string
            version-internal-documents.json:
              type: object
              description: List of version internal documents data. Only provided for packages of kind `package`.
              properties:
                documents:
                  description: List of version internal documents
                  type: array
                  items:
                    $ref: "#/components/schemas/InternalDocumentMetadata"
            comparison-internal-documents.json:
              type: object
              description: List of comparison internal documents data. Could be present for packages of kind `package` or `dashboard`.
              properties:
                documents:
                  description: List of comparison internal documents
                  type: array
                  items:
                    $ref: "#/components/schemas/ComparisonInternalDocumentMetadata"
            comparisons.json:
              $ref: "#/components/schemas/BuildResultComparisons"
            comparisons/{comparisonFileId}:
              $ref: "#/components/schemas/BuildResultComparisonsData"
            operations.json:
              description: List of operations for publish.
              type: object
              properties:
                operations:
                  type: array
                  items:
                    allOf:
                      - $ref: "#/components/schemas/Operation"
                      - type: object
                        required:
                          - data
                          - metadata
                          - searchScopes
                        properties:
                          models:
                            description: Map<name:string, hash:string> of operation models
                            type: object
                            additionalProperties:
                              type: string
                            example:
                              Template: a6b1596abe745a4a0cd3de25a411dbe671a3ba7c
                              ErrorResponse: cf1d87cf3895af106a3ad29f2098dcc2cc477e71
                              CreateItemDto: 72bfdc14758213e5c09620b29054da86b75d4868
                          deprecatedInfo:
                            description: |
                              Additional information about deprecated operation:
                              * for REST API it is value of 'x-deprecated-meta' extension (value of extension must be string), which is defined for deprecated operation.
                              * for GraphQL API it is value of 'reason' argument of @deprecated directive, which is defined for deprecated operation.
                              * for AsyncAPI 3.0: "[Deprecated] message {name}" when message has x-deprecated: true (name = message.title or messageId),
                                or "[Deprecated] channel {name}" when channel has x-deprecated: true (name = channel.title or channelId).
                            type: string
                          deprecatedInPreviousVersions:
                            description: List of previous release versions where operation was also deprecated
                            type: array
                            items:
                              type: string
                            example: ["2022.2", "2022,1", "2021.4"]
                          deprecatedItems:
                            $ref: "#/components/schemas/DeprecatedItems"
                          metadata:
                            description: Metadata content depend on apiType.
                            oneOf:
                              - $ref: "#/components/schemas/RestOperationMeta"
                              - $ref: "#/components/schemas/GraphQLOperationMeta"
                              - $ref: "#/components/schemas/ProtobufOperationMeta"
                              - $ref: "#/components/schemas/AsyncAPIOperationMeta"
                          searchScopes:
                            description: Scopes for search indexes.
                            type: object
                            additionalProperties:
                              type: string
                            example:
                              all: "Quote Snapshot V6 Performs full text search ofQuotes Statistics By Phrase fullTextSearchStatistics searchPhrase offset int32 limit int32 fields 200 OK application/json quote anonymousCustomerData assignTo The name of the user/team to whom the Quote is assigned cancellationReason The entity that represents common information about a customer's request cancellationReasonDescription The reason (from the free text field) why the Quote has been cancelled contactMedium A list of contact mediums (ContactMedium [*]). Indicates the contact medium that could be used to contact the party deliveryMethod Id of the Delivery Method (from the Delivery Method list) for Quote description Description of the Quote extendedParameters additionalProperties The attribute contains additional parameters of the Quote The attribute contains additional parameters of the Quote Map<String,List<String>> The attribute contains additional parameters of the Quote externalRefs Represents a reference to an external object id Unique identifier of the Quote name Quote name quoteDate Date and time when the Quote was created date-time quoteTotalPrice Represents Quote total price relatedParty A list of related party references (RelatedPartyRef [*]).A related party defines party or party role linked to a specific entity relatedQuote A list of related quotes (RelatedQuote [*]). It represents another revision of the in-flight Quote from the same chain, i.e. in-flight Quote with the same initialBaselineQuoteId value. This class is returned in the API response only in case of enhancedListQuotes API operation is called. It can be empty if there are no other in-flight Quotes in this chain revision Attribute is used to mark in-flight Quote. Increased in case changes are done to the Quote after submission int32 state State of the Quote updatedWhen Date and time when the Quote was updated date-time validFor Quote with reduced scope of attributes quoteItemStatistic Shows the number of Quote's root Quote Items grouped by some criteria(e.g. by Product Offering, Action) action Numbers of root Quote Items grouped by Action count Number of Quote Items for the specific value int32 name Action name Shows the number of Customer's Product Instances for specified criteria (e.g. Product Family, Billing Account and so on) productFamilyId Unique identifier of Product Family productFamilyName Product family name. Name is returned in the default locale. If alternative locale is passed in Accept-language header in the API request the system returns corresponding localized name in the response. productOfferingId Unique identifier of Product Offering productOfferingName Product offering name. Attribute is returned in the response for catalog entities only (product offering). Name is returned in the default locale. If alternative locale is passed in Accept-language header in the API request the system returns corresponding localized name in the response Shows the number of Quote's root Quote Items grouped by some criteria(e.g. by Product Offering, Action) Shows the Quote with a number of root Quote Items 4XX default response application/json;charset=UTF-8;model=errorResponse;version=1 5XX default response application/json;charset=UTF-8;model=errorResponse;version=1 "
        - title: Build result for changelog
          description: Build result for buildType = changelog
          type: object
          required:
            - info.json
          properties:
            info.json:
              description: |
                Build configuration, published version details.
              type: object
              required:
                - packageId
                - version
                - buildType
              properties:
                packageId:
                  description: Package unique string identifier (full alias).
                  type: string
                  example: "QS.CloudQSS.CPQ.Q-TMF"
                version:
                  description: Version name for publication.
                  type: string
                  example: "2022.3"
                previousVersion:
                  description: |
                    Name of the previous published version.
                    The mask <version>@<revision> may be used to return the revision number.
                  type: string
                  example: "2022.2@4"
                  default: ""
                previousVersionPackageId:
                  description: Previous release version package id.
                  type: string
                  example: "QS.CloudQSS.CPQ.Q-TMF"
                buildType:
                  description: |
                    Type of the build process.
                    - **changelog** - only the changelog calculation, no API contracts version will be created. Both version and previousVersion fields *must* contain @<revision> suffix when using changelog buildType.
                  type: string
                  enum:
                    - changelog
                buildId:
                  description: Id of the build.
                  type: string
                builderVersion:
                  type: string
                  description: Version of the builder with which build was made.
                createdBy:
                  type: string
                  description: The user who started the build process.
                metadata:
                  description: Common publish metadata.
                  type: object
                  properties:
                    commitId:
                      description: Last Git commit ID of the version.
                      type: string
                      example: a5d45af7
                    repositoryUrl:
                      description: Url of the Git repository.
                      type: string
                      format: URI
                      example: 'https://<git_group_link>/apihub-registry'
                    labels:
                      description: List of version labels.
                      type: array
                      items:
                        type: string
                      example: ["TMF"]
                    cloudName:
                      description: Name of the cloud for publication from Agent.
                      type: string
                      example: 'k8s-apps2'
                    cloudUrl:
                      description: Full address of the cloud from Agent.
                      type: string
                      format: URI
                      example: "https://k8s-apps2.k8s.sdntest.qubership.org"
                    namespace:
                      description: Namespace of Agent's publication.
                      type: string
                      example: "cloudQSS-release2"
            comparison-internal-documents.json:
              $ref: "#/components/schemas/BuildResultInternalDocuments"
            comparisons.json:
              $ref: "#/components/schemas/BuildResultComparisons"
            comparisons/{comparisonFileId}:
              $ref: "#/components/schemas/BuildResultComparisonsData"
        - title: Build result for mergedSpecification and reducedSourceSpecifications
          description: |
            Build result for the following buildType:
              - mergedSpecification
              - reducedSourceSpecifications
          type: object
          required:
            - info.json
          properties:
            info.json:
              description: |
                Build configuration, published version details.
              type: object
              required:
                - packageId
                - version
                - buildType
              properties:
                packageId:
                  description: Package unique string identifier (full alias).
                  type: string
                  example: "QS.CloudQSS.CPQ.Q-TMF"
                version:
                  description: Version name for publication.
                  type: string
                  example: "2022.3"
                buildId:
                  description: Id of the build.
                  type: string
                builderVersion:
                  type: string
                  description: Version of the builder with which build was made.
                format:
                  description: Should be specified if buildType equal to mergedSpecification or reducedSourceSpecifications
                  type: string
                  enum:
                    - yaml
                    - json
                    - html
                  default: json
                apiType:
                  description: Document transformation is available only for apiType = REST
                  type: string
                  enum:
                    - rest
                groupName:
                  description: Name of the group
                  type: string
                  example: v1
                buildType:
                  description: |
                    Type of the build process for OpeanAPI specification tranformation. Available options are:
                    - **reducedSourceSpecifications** - proccess that finds source specifications for all operations from operation group and removes from these specifications operations other than those that are included into operation group.
                    - **mergedSpecification** - process the merges all operations from an operation group into one specification.
                  type: string
                  enum:
                    - reducedSourceSpecifications
                    - mergedSpecification
                createdBy:
                  description: The user who started the build process.
                  type: string
            documents.json:
              type: object
              description: List of documents data.
              properties:
                documents:
                  type: array
                  items:
                    description: List of builded files.
                    type: object
                    required:
                      - fileId
                      - slug
                      - title
                      - format
                      - type
                      - operations
                    properties:
                      fileId:
                        type: string
                        description: File name with folders.
                        example: "docs/qitmf-v5.11.json"
                      fileName:
                        type: string
                        description: File name (slug+extension).
                        example: "qitmf-v5.11.json"
                      slug:
                        description: Published file slug.
                        type: string
                        pattern: "^[a-z0-9-]"
                        example: "qitmf-v5-11-json"
                      type:
                        $ref: "#/components/schemas/SpecificationType"
                      format:
                        $ref: "#/components/schemas/DocumentFormat"
                      title:
                        description: Document title and summary.
                        type: string
                      description:
                        description: Document description.
                        type: string
                      version:
                        description: Document version. For openapi document, version is taken from info object.
                        type: string
                        example: "1.0.1"
                      operationIds:
                        description: List of operation IDs.
                        type: array
                        items:
                          type: string
                        example: ["get-quoteManagement-v5-quote"]
      discriminator:
        propertyName: buildType
    SingleOperationChange:
      allOf:
        - type: object
          description: Discrepancy data in a single operation.
          properties:
            description:
              description: >-
                Human-readable description of point of change.
              type: string
              example: "[Added] Property: summary."
            severity:
              $ref: "#/components/schemas/ChangeSeverity"
            scope:
              type: string
              description: |
                Part of operation (like request/response) where change was made. Scope differs for apiTypes.\
                Scope is needed to correctly identify severity of change, because the same change can have different severity in request/response.
            action:
              description: Action, what was done with the endpoint.
              type: string
              enum:
                - add
                - remove
                - replace
                - rename
        - oneOf:
          - $ref: "#/components/schemas/ChangeAdd"
          - $ref: "#/components/schemas/ChangeRemove"
          - $ref: "#/components/schemas/ChangeReplace"
          - $ref: "#/components/schemas/ChangeRename"
    ChangeAdd:
      type: object
      description: Data of single operation change when change action = add
      properties:
        currentDeclarationJsonPaths:
          description: |
            (below, a document is not considered to be an original document, but a document with one specific operation)\
            When comparing two documents (origin and changed; difference from changed document apended to the original document), a declarative jsonPath is calculated for each change.
          type: array
          items:
            type: array
            items:
              anyOf:
               - type: string
               - type: integer
          example: [["components/schemas/Cat/minProperties", "components/schemas/Dog/minProperties"], ["/quoteManagement/v5/quote"]]
        currentValueHash:
          type: string
          description: |
            Hash of the added entity.\
            Hash is needed to identify that the same enitity was changed in other operations, that allows calculating declarative number of changes in package version.
    ChangeRemove:
      type: object
      description: Data of single operation change when change action = remove.
      properties:
        previousDeclarationJsonPaths:
          description: |
            (below, a document is not considered to be an original document, but a document with one specific operation)\
            When comparing two documents (origin and changed; difference from changed document apended to the original document), a declarative jsonPath is calculated for each change.
          type: array
          items:
            type: array
            items:
              anyOf:
               - type: string
               - type: integer
          example: [["components/schemas/Cat/minProperties", "components/schemas/Dog/minProperties"], ["/quoteManagement/v5/quote"]]
        previousValueHash:
          type: string
          description: |
            Hash of the removed entity.\
            Hash is needed to identify that the same enitity was changed in other operations, that allows calculating declarative number of changes in package version.
    ChangeReplace:
      type: object
      description: Data of single operation change when change action = replace
      properties:
        currentDeclarationJsonPaths:
          description: |
            (below, a document is not considered to be an original document, but a document with one specific operation)\
            When comparing two documents (origin and changed; difference from changed document apended to the original document), a declarative jsonPath is calculated for each change.
          type: array
          items:
            type: array
            items:
              anyOf:
               - type: string
               - type: integer
          example: [["components/schemas/Cat/minProperties", "components/schemas/Dog/minProperties"], ["/quoteManagement/v5/quote"]]
        previousDeclarationJsonPaths:
          description: |
            (below, a document is not considered to be an original document, but a document with one specific operation)\
            When comparing two documents (origin and changed; difference from changed document apended to the original document), a declarative jsonPath is calculated for each change.
          type: array
          items:
            type: array
            items:
              anyOf:
               - type: string
               - type: integer
          example: [["components/schemas/Cat/minProperties", "components/schemas/Dog/minProperties"], ["/quoteManagement/v5/quote"]]
        previousValueHash:
          type: string
          description: |
            Previous hash of the changed entity.\
            Hash is needed to identify that the same enitity was changed in other operations, that allows calculating declarative number of changes in package version.
        currentValueHash:
          type: string
          description: |
            Current hash of the changed entity.\
            Hash is needed to identify that the same enitity was changed in other operations, that allows calculating declarative number of changes in package version.
    ChangeRename:
      type: object
      description: Data of single operation change when change action = rename.
      properties:
        currentDeclarationJsonPaths:
          description: |
            (below, a document is not considered to be an original document, but a document with one specific operation)\
            When comparing two documents (origin and changed; difference from changed document apended to the original document), a declarative jsonPath is calculated for each change.
          type: array
          items:
            type: array
            items:
              anyOf:
               - type: string
               - type: integer
          example: [["components/schemas/Cat/minProperties", "components/schemas/Dog/minProperties"], ["/quoteManagement/v5/quote"]]
        previousDeclarationJsonPaths:
          description: |
            (below, a document is not considered to be an original document, but a document with one specific operation)\
            When comparing two documents (origin and changed; difference from changed document apended to the original document), a declarative jsonPath is calculated for each change.
          type: array
          items:
            type: array
            items:
              anyOf:
               - type: string
               - type: integer
          example: [["components/schemas/Cat/minProperties", "components/schemas/Dog/minProperties"], ["/quoteManagement/v5/quote"]]
        previousKey:
          type: string
          description: Previous key (name) of the renamed entity.
        currentKey:
          type: string
          description: Current key (name) of the renamed entity.
    ChangeSummary:
      description: |
        Numbers of changes between the current and previous published version.
      type: object
      properties:
        breaking:
          description: Number of changes, breaking the backward compatibility.
          type: integer
          default: 0
        semi-breaking:
          description: Number of changes, breaking the backward compatibility in a legal way. For example, deleting correctly deprecated endpoint.
          type: integer
          default: 0
        deprecated:
          description: Number of deprecated endpoints.
          type: integer
          default: 0
        non-breaking:
          description: Number of non-breaking changes.
          type: integer
          default: 0
        annotation:
          description: Number of annotation changes.
          type: integer
          default: 0
        unclassified:
          description: Number of unclassified changes.
          type: integer
          default: 0
    BuildErrors:
      type: object
      properties:
        errors:
          type: string
          description: Build error message.
    ChangeSeverity:
      description: Severity of the particular change.
      type: string
      enum:
        - breaking
        - semi-breaking
        - deprecated
        - non-breaking
        - annotation
        - unclassified
    PublishBuildConfig:
      type: object
      description: |
        Configuration for publication process.\
        Files or/and Refs are **required**.
      required:
        - version
        - status
      properties:
        buildType:
          description: |
            Type of the build process.
            "build" type means version publication process.
          type: string
          enum:
            - build
        version:
          description: Version name for publication.
          type: string
          example: "2022.3"
        previousVersion:
          description: Name of the previous published version.
          type: string
          example: "2022.2"
          default: ""
        previousVersionPackageId:
          description: Previous release version package id.
          type: string
          example: "QS.CQSS.CPQ.TMF"
        status:
          $ref: "#/components/schemas/VersionStatusEnum"
        versionLabels:
          description: List of version labels.
          type: array
          items:
            type: string
          example: ["part-of:CloudQSS-CPQBE"]
        files:
          description: |
            Detailed data about files in sources archive.
            Required in no Refs are provided.
          type: array
          items:
            type: object
            required:
              - fileId
            properties:
              fileId:
                type: string
                description: File name.
                example: "qitmf-v5.11.json"
              publish:
                description: Flag, publish the source file or not.
                type: boolean
                default: true
              labels:
                description: List of file labels.
                type: array
                items:
                  type: string
                example: ["TMF"]
              blobId:
                description: Git blob ID of the file.
                type: string
                example: a5d45af7
              xApiKind:
                description: Custom x-api-kind parameter.
                type: string
                example: "no-BWC"
        refs:
          description: |
            Detailed data about referenced versions for current package version.
            Required in no Files are provided.
          type: array
          items:
            type: object
            required:
              - refId
              - version
              - type
            properties:
              refId:
                description: Referenced package Id.
                type: string
                example: "QS.CloudQSS.CPQ.CORE"
              version:
                description: Referenced package version number.
                type: string
                example: "2022.2@5"
    ExportVersionBuildConfig:
      description: Build config for export of version.
      type: object
      required:
        - buildType
        - packageId
        - version
        - format
      properties:
        buildType:
          description: Type of the build process.
          type: string
          enum:
            - exportVersion
        packageId:
          description: Package unique identifier (full alias) of package with kind = package.
          type: string
          example: NC.CBSS.CPQ.TMF
        version:
          description: |
            Package version.\
            The mask <version>@<revision> will be used for return in a
            specific revision.
          type: string
          example: 2022.3@3
        format:
          description: |
            File format for export.\
            * format = html: the export result includes a ZIP file containing interactive HTML for OpenAPI documents (i.e., those with types openapi-3-1, openapi-3-0, or openapi-2-0) and raw files for all other document types.
            * format = yaml/json: the export result includes a ZIP file containing OpenAPI documents in yaml/json format accordingly, and raw files for all other document types.
          type: string
          enum:
            - yaml
            - json
            - html
        allowedOasExtensions:
          description: |
            List of OAS extensions that shall be preserverd when user
            exports OpenAPI specification(s) with remove OAS
            extensions options:
              * If allowedOasExtensions is empty array, then this means
            OAS extensions shall be removed, but there is no allowed
            OAS exntesions, i.e. all OAS extensions shall be removed.
              * If allowedOasExtensions is undefined, then this means
            that OAS extensions shall **not** be removed (i.e.
            removeOasExtensions = false).
              * If allowedOasExtensions has some value(s), then this
            means that OAS extensions shall be removed except for the
            provided value(s) of allowed OAS extension(s).
          type: array
          uniqueItems: true
          items:
            type: string
            pattern: ^x-
          example:
            - x-internal-info
            - x-design-details
    ExportRestDocumentBuildConfig:
      description: Build config for export of one OpenAPI document.
      type: object
      required:
        - buildType
        - packageId
        - version
        - documentId
        - format
      properties:
        buildType:
          description: Type of the build process.
          type: string
          enum:
            - exportRestDocument
        packageId:
          description: Package unique identifier (full alias).
          type: string
          example: NC.CBSS.CPQ.TMF
        version:
          description: |
            Package version.\
            The mask <version>@<revision> will be used for return in a
            specific revision.
          type: string
          example: 2022.3@3
        documentId:
          description: Unique string identifier of document to export. Type of this document must be openapi-3-1 / openapi-3-0 / openapi-2-0.
          type: string
          pattern: "^[a-z0-9-]"
          example: "qitmf-v5-11-json"
        format:
          type: string
          enum:
            - yaml
            - json
            - html
        allowedOasExtensions:
          description: |
            List of OAS extensions that shall be preserverd when user
            exports OpenAPI specification(s) with remove OAS
            extensions options:
              * If allowedOasExtensions is empty array, then this means
            OAS extensions shall be removed, but there is no allowed
            OAS exntesions, i.e. all OAS extensions shall be removed.
              * If allowedOasExtensions is undefined, then this means
            that OAS extensions shall **not** be removed (i.e.
            removeOasExtensions = false).
              * If allowedOasExtensions has some value(s), then this
            means that OAS extensions shall be removed except for the
            provided value(s) of allowed OAS extension(s).
          type: array
          uniqueItems: true
          items:
            type: string
            pattern: ^x-
          example:
            - x-internal-info
            - x-design-details
    ExportRestOperationsGroupBuildConfig:
      description: Build config for export of REST operations group.
      type: object
      required:
        - buildType
        - packageId
        - version
        - groupName
        - operationsSpecTransformation
        - format
      properties:
        buildType:
          description: Type of the build process.
          type: string
          enum:
            - exportRestOperationsGroup
        packageId:
          description: Package unique identifier (full alias).
          type: string
          example: NC.CBSS.CPQ.TMF
        version:
          description: |
            Package version.\
            The mask <version>@<revision> will be used for return in a
            specific revision.
          type: string
          example: 2022.3@3
        groupName:
          description: Name of the group
          type: string
          example: v1
        operationsSpecTransformation:
          description: >
            Type of OpeanAPI specification tranformation. Available options are:
              - **reducedSourceSpecifications** - proccess that finds source specifications for all operations from operation group and removes from these specifications operations other than those that are included into operation group.
              - **mergedSpecification** - process the merges all operations from an operation group into one specification.
          type: string
          enum:
            - reducedSourceSpecifications
            - mergedSpecification
        format:
          type: string
          description: |
            Format of the exported file.\
            If operationsSpecTransformation = reducedSourceSpecifications, then export result includes a ZIP file containing files in selected format.\
            If operationsSpecTransformation = mergedSpecification:
              * if format = html, then export result is a ZIP file containing interactive HTML for OpenAPI document.
              * if format = yaml/json, then export result is one OpenAPI file in the appropriate format.
          enum:
            - yaml
            - json
            - html
        allowedOasExtensions:
          description: |
            List of OAS extensions that shall be preserverd when user
            exports OpenAPI specification(s) with remove OAS
            extensions options:
              * If allowedOasExtensions is empty array, then this means
            OAS extensions shall be removed, but there is no allowed
            OAS exntesions, i.e. all OAS extensions shall be removed.
              * If allowedOasExtensions is undefined, then this means
            that OAS extensions shall **not** be removed (i.e.
            removeOasExtensions = false).
              * If allowedOasExtensions has some value(s), then this
            means that OAS extensions shall be removed except for the
            provided value(s) of allowed OAS extension(s).
          type: array
          uniqueItems: true
          items:
            type: string
            pattern: ^x-
          example:
            - x-internal-info
            - x-design-details
    InternalDocumentMetadata:
      type: object
      required:
        - id
        - fileName
      properties:
        id:
          description: Published file id.
          type: string
          pattern: "^[a-z0-9-]"
          example: "qitmf-v5-11-json"
        fileName:
          type: string
          description: File name (slug+extension).
          example: "qitmf-v5.11.json"
    ComparisonInternalDocumentMetadata:
      allOf:
        - $ref: "#/components/schemas/InternalDocumentMetadata"
        - type: object
          required:
          - comparisonFileId
          properties:
            comparisonFileId:
              type: string
              description: Identifier of the comparison for which this internal document belongs.
                Will be the same for all internal documents for package of kind `package`.
                Could be different for package of kind `dashboard`.
              example: "comparisonFile1.json"
    BuildResultInternalDocuments:
      type: object
      description: List of internal documents data.
      properties:
        documents:
          description: List of internal documents
          type: array
          items:
            $ref: "#/components/schemas/InternalDocumentMetadata"
    BuildResultComparisons:
      type: object
      properties:
        comparisons:
          type: array
          items:
            type: object
            required:
              - operationTypes
            properties:
              comparisonFileId:
                type: string
                description: Pointer to the file with changes. Optional, required only if package contains documents. Not required in case of refs only (dashboard).
                example: "comparisonFile1.json"
              packageId:
                description: Package unique string identifier (full alias).
                type: string
                example: "QS.CloudQSS.CPQ.Q-TMF"
              version:
                description: Version name for publication.
                type: string
                example: "2022.3"
              revision:
                type: number
              previousVersion:
                description: |
                  Name of the previous published version.
                type: string
                example: "2022.2"
                default: ""
              previousVersionPackageId:
                description: Previous release version package id.
                type: string
                example: "QS.CloudQSS.CPQ.Q-TMF"
              previousVersionRevision:
                type: number
              operationTypes:
                type: array
                items:
                  type: object
                  properties:
                    apiType:
                      type: string
                    changesSummary:
                      $ref: "#/components/schemas/ChangeSummary"
                    numberOfImpactedOperations:
                      allOf:
                        - $ref: '#/components/schemas/ChangeSummary'
                        - type: object
                          description: Number of operations impacted by each severety type.
                    apiAudienceTransitions:
                          type: array
                          description: Shows transitions of operations' apiAudience value (compared to the previous release version) and number of operations in which this transition occurred. The array contains only records of transitions that actually occurred in operations.
                          items:
                            type: object
                            properties:
                              currentAudience:
                                type: string
                                description: Current apiAudience value (currentAudience must not be equal to previousAudience)
                                enum:
                                  - internal
                                  - external
                                  - unknown
                              previousAudience:
                                type: string
                                description: Previous apiAudience value
                                enum:
                                  - internal
                                  - external
                                  - unknown
                              operationsCount:
                                type: number
                                description: Number of operations in which the apiAudience was changed from previousAudience to currentAudience
                    tags:
                      type: array
                      items:
                        type: string
                      example:
                        ["a", "b"]
              fromCache:
                description: True if the changes were retrieved from BE (not calculated)
                type: boolean
    BuildResultComparisonsData:
      type: object
      description: List of changes data.
      properties:
        operations:
          description: Collection of changes depend on apiType.
          type: array
          items:
            type: object
            required:
              - changes
              - changesSummary
              - comparisonInternalDocumentId
            properties:
              operationId:
                description: >-
                  Operation unique identifier (not the same as operationId tag from the OpenAPI file).\
                  Parameter is required if operation was added or modified.
                type: string
                example: get-quoteManagement-v5-quote-quoteId
              previousOperationId:
                description: >-
                  Operation unique identifier from previous version (not the same as operationId tag from the OpenAPI file).\
                  Parameter is required if operation was deleted or modified.
                type: string
                example: get-quoteManagement-v5-quote-id
              dataHash:
                description: Operation hash.
                type: string
                example: sdfsdfsf242
              previousDataHash:
                description: Hash of the previous published version operation.
                type: string
                example: sdfsdfsf24dds2
              changeSummary:
                $ref: "#/components/schemas/ChangeSummary"
              changes:
                description: Collection of changes for each operation.
                type: array
                items:
                  $ref: "#/components/schemas/SingleOperationChange"
              comparisonInternalDocumentId:
                description: >
                  Unique string identifier of the internal merged document,
                  where diffs between operation and previous operation are present.
                  Corresponds to `id` field for the document in `comparison-internal-documents.json`
                type: string
                pattern: "^[a-z0-9-]"
                example: "qitmf-v5-11-qitmf-v5-12-merged-json"
  examples:
    IncorrectInputParameters:
      description: Incorrect input parameters
      value:
        status: 400
        code: "APIHUB-COMMON-4001"
        message: "Incorrect input parameters"
    InternalServerError:
      description: Default internal server error
      value:
        status: 500
        code: "APIHUB-8000"
        reason: "InternalServerError"
        message: "InternalServerError"
    PackageNotFound:
      description: Package not found by ID. Response for the 404 error
      value:
        status: 404
        code: "APIHUB-3020"
        message: "package with packageId = $packageId not found"
  securitySchemes:
    BearerAuth:
      type: http
      description: Bearer token authentication. Default security scheme for API usage.
      scheme: bearer
      bearerFormat: JWT
    CookieAuth:
      type: apiKey
      in: cookie
      name: apihub-access-token
      description: Authentication via the `apihub-access-token` cookie.
    api-key:
      type: apiKey
      description: Api-key authentication.
      name: api-key
      in: header
    BasicAuth:
      type: http
      description: Login/password authentication.
      scheme: basic
    PersonalAccessToken:
      type: apiKey
      description: Authentication by personal access token.
      name: X-Personal-Access-Token
      in: header
    RefreshTokenAuth:
      type: apiKey
      in: cookie
      name: apihub-refresh-token
      description: Authentication via refresh token cookie
